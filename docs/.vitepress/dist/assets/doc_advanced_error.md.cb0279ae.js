import{_ as n,c as s,o as a,a as t}from"./app.263436ba.js";const _='{"title":"\u9519\u8BEF\u5904\u7406","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u9875\u9762","slug":"\u9875\u9762"},{"level":2,"title":"\u8BF7\u6C42","slug":"\u8BF7\u6C42"}],"relativePath":"doc/advanced/error.md"}',p={},o=t(`<h1 id="\u9519\u8BEF\u5904\u7406" tabindex="-1">\u9519\u8BEF\u5904\u7406 <a class="header-anchor" href="#\u9519\u8BEF\u5904\u7406" aria-hidden="true">#</a></h1><h2 id="\u9875\u9762" tabindex="-1">\u9875\u9762 <a class="header-anchor" href="#\u9875\u9762" aria-hidden="true">#</a></h2><p>404</p><p>\u9875\u9762\u7EA7\u7684\u9519\u8BEF\u5904\u7406\u7531 vue-router \u7EDF\u4E00\u5904\u7406\uFF0C\u6240\u6709\u5339\u914D\u4E0D\u5230\u6B63\u786E\u8DEF\u7531\u7684\u9875\u9762\u90FD\u4F1A\u8FDB 404\u9875\u9762\u3002</p><div class="language-ts"><pre><code><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/:pathMatch(.*)*&#39;</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">&#39;/404&#39;</span> <span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u6CE8\u610F\u4E8B\u9879 \u8FD9\u91CC\u6709\u4E00\u4E2A\u9700\u8981\u975E\u5E38\u6CE8\u610F\u7684\u5730\u65B9\u5C31\u662F 404 \u9875\u9762\u4E00\u5B9A\u8981\u6700\u540E\u52A0\u8F7D\uFF0C\u5982\u679C\u653E\u5728 constantRoutes \u4E00\u540C\u58F0\u660E\u4E86 404 \uFF0C\u540E\u9762\u7684\u6240\u6709\u9875\u9762\u90FD\u4F1A\u88AB\u62E6\u622A\u5230404</p></div><p>401</p><p>\u5728@/permission.js\u505A\u4E86\u6743\u9650\u63A7\u5236\uFF0C\u6240\u6709\u6CA1\u6709\u6743\u9650\u8FDB\u5165\u8BE5\u8DEF\u7531\u7684\u7528\u6237\u90FD\u4F1A\u88AB\u91CD\u5B9A\u5411\u5230 401\u9875\u9762\u3002</p><h2 id="\u8BF7\u6C42" tabindex="-1">\u8BF7\u6C42 <a class="header-anchor" href="#\u8BF7\u6C42" aria-hidden="true">#</a></h2><p>\u9879\u76EE\u91CC\u6240\u6709\u7684\u8BF7\u6C42\u90FD\u4F1A\u8D70\xA0<code>@/services/axios-interceptors.ts</code>\xA0\u91CC\u9762\u521B\u5EFA\u7684\u7684 axios \u5B9E\u4F8B\uFF0C\u5B83\u7EDF\u4E00\u505A\u4E86\u9519\u8BEF\u5904\u7406\u3002 \u4F60\u53EF\u4EE5\u5728service.interceptors.response.use \u62E6\u622A\u5668\u4E4B\u4E2D\u6839\u636E\u81EA\u5DF1\u7684\u5B9E\u9645\u4E1A\u52A1\u7EDF\u4E00\u9488\u5BF9\u4E0D\u540C\u7684\u72B6\u6001\u7801\u6216\u8005\u6839\u636E\u81EA\u5B9A\u4E49 code \u6765\u505A\u9519\u8BEF\u5904\u7406\u3002\u5982\uFF1A</p><div class="language-ts"><pre><code>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u767B\u5F55\u5931\u6548</span>
    storage<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> redirect<span class="token operator">:</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>fullPath <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> errorHandler<span class="token punctuation">)</span>

</code></pre></div><p>\u56E0\u4E3A\u6240\u6709\u8BF7\u6C42\u8FD4\u56DE\u7684\u662Fpromise\uFF0C\u6240\u4EE5\u4F60\u4E5F\u53EF\u4EE5\u5BF9\u6BCF\u4E00\u4E2A\u8BF7\u6C42\u901A\u8FC7catch \u9519\u8BEF\uFF0C\u4ECE\u800C\u8FDB\u884C\u5355\u72EC\u7684\u5904\u7406</p><div class="language-ts"><pre><code><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    xxxx
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>`,13),e=[o];function c(u,r,l,i,k,d){return a(),s("div",null,e)}var f=n(p,[["render",c]]);export{_ as __pageData,f as default};
